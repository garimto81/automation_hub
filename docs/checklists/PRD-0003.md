# PRD-0003 체크리스트: 프로젝트 간 모델 통합

## 문서 정보

| 항목 | 내용 |
|------|------|
| **PRD** | PRD-0003 |
| **버전** | 1.0.0 |
| **상태** | In Progress |
| **시작일** | 2026-01-05 |
| **목표일** | - |

---

## Phase 1: 스키마 확장

| # | 작업 | 상태 | PR |
|---|------|:----:|:--:|
| 1.1 | SourceType 열거형 확장 (AI_VIDEO 추가, from_legacy 메서드) | [ ] | |
| 1.2 | Hand 모델 확장 (confidence, cross_validated, requires_review) | [ ] | |
| 1.3 | Recording 모델 신규 생성 | [ ] | |
| 1.4 | Grade 모델 신규 생성 | [ ] | |
| 1.5 | Template 모델 신규 생성 | [ ] | |
| 1.6 | RenderInstruction 확장 (progress, template_id, data_selections_json) | [ ] | |
| 1.7 | RecordingsRepository 구현 | [ ] | |
| 1.8 | GradesRepository 구현 | [ ] | |
| 1.9 | TemplatesRepository 구현 | [ ] | |
| 1.10 | init-db.sql 업데이트 (신규 테이블 + ALTER) | [ ] | |
| 1.11 | 단위 테스트 작성 (models) | [ ] | |
| 1.12 | 단위 테스트 작성 (repositories) | [ ] | |

**Phase 1 완료 기준**:
- [ ] 모든 신규 모델 타입 힌트 완료
- [ ] Repository 패턴 일관성 유지
- [ ] 테스트 커버리지 > 80%

---

## Phase 2: automation_feature_table 통합

| # | 작업 | 상태 | PR |
|---|------|:----:|:--:|
| 2.1 | 어댑터 레이어 생성 (adapters/hub_adapter.py) | [ ] | |
| 2.2 | FusedHandResult → Hand 변환 함수 구현 | [ ] | |
| 2.3 | SourceType 매핑 (PRIMARY → RFID, SECONDARY → AI_VIDEO) | [ ] | |
| 2.4 | Recording 저장 로직 변경 (→ RecordingsRepository) | [ ] | |
| 2.5 | Grade 저장 로직 변경 (→ GradesRepository) | [ ] | |
| 2.6 | DB 연결 변경 (자체 DB → wsop_automation) | [ ] | |
| 2.7 | 데이터 마이그레이션 스크립트 작성 | [ ] | |
| 2.8 | 통합 테스트 작성 | [ ] | |
| 2.9 | 기존 데이터 마이그레이션 실행 | [ ] | |
| 2.10 | E2E 테스트 통과 확인 | [ ] | |

**Phase 2 완료 기준**:
- [ ] feature_table이 shared 모듈만 사용
- [ ] 기존 기능 정상 동작
- [ ] 마이그레이션 데이터 100% 이전

---

## Phase 3: automation_ae 통합

| # | 작업 | 상태 | PR |
|---|------|:----:|:--:|
| 3.1 | 어댑터 레이어 생성 (backend/app/adapters/hub_adapter.py) | [ ] | |
| 3.2 | Job → RenderInstruction 변환 함수 구현 | [ ] | |
| 3.3 | Template 저장 로직 변경 (→ TemplatesRepository) | [ ] | |
| 3.4 | Output → RenderOutput 변환 함수 구현 | [ ] | |
| 3.5 | DB 연결 변경 (ae_automation → wsop_automation) | [ ] | |
| 3.6 | Polling 로직 교체 (ae 전용 → hub 공유) | [ ] | |
| 3.7 | 데이터 마이그레이션 스크립트 작성 | [ ] | |
| 3.8 | 통합 테스트 작성 | [ ] | |
| 3.9 | 기존 데이터 마이그레이션 실행 | [ ] | |
| 3.10 | E2E 테스트 통과 확인 | [ ] | |

**Phase 3 완료 기준**:
- [ ] ae가 shared 모듈만 사용
- [ ] 기존 기능 정상 동작
- [ ] 마이그레이션 데이터 100% 이전

---

## Phase 4: 검증 및 정리

| # | 작업 | 상태 | PR |
|---|------|:----:|:--:|
| 4.1 | 데이터 무결성 검증 쿼리 실행 | [ ] | |
| 4.2 | 성능 테스트 (응답 시간 측정) | [ ] | |
| 4.3 | automation_hub CLAUDE.md 업데이트 | [ ] | |
| 4.4 | automation_feature_table CLAUDE.md 업데이트 | [ ] | |
| 4.5 | automation_ae CLAUDE.md 업데이트 | [ ] | |
| 4.6 | feature_table 구버전 모델 Deprecation | [ ] | |
| 4.7 | ae 구버전 모델 Deprecation | [ ] | |
| 4.8 | 구버전 코드 제거 | [ ] | |

**Phase 4 완료 기준**:
- [ ] 단일 wsop_automation DB 운영
- [ ] 모든 문서 최신화
- [ ] Deprecation 완료

---

## 진행률 요약

| Phase | 총 항목 | 완료 | 진행률 |
|-------|:------:|:----:|:------:|
| Phase 1 | 12 | 0 | 0% |
| Phase 2 | 10 | 0 | 0% |
| Phase 3 | 10 | 0 | 0% |
| Phase 4 | 8 | 0 | 0% |
| **전체** | **40** | **0** | **0%** |

---

## 변경 이력

| 날짜 | 버전 | 변경 내용 |
|------|------|----------|
| 2026-01-05 | 1.0.0 | 초기 체크리스트 생성 |
