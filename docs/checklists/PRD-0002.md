# PRD-0002 Checklist: 충돌/중복 모니터링 시스템

## 문서 정보

| 항목 | 값 |
|------|---|
| **PRD ID** | PRD-0002 |
| **제목** | 충돌/중복 모니터링 시스템 |
| **상태** | Draft |
| **생성일** | 2025-01-05 |

---

## Phase 1: 기반 구축

- [ ] `conflict_events` 테이블 생성 (#TBD)
  - [ ] `scripts/init-db.sql` 업데이트
  - [ ] 인덱스 생성 확인
- [ ] `ConflictEvent` Pydantic 모델 구현 (#TBD)
  - [ ] `shared/models/conflict_event.py` 작성
  - [ ] `ConflictType`, `Severity`, `ConflictStatus` Enum
  - [ ] `to_db_dict()`, `from_db_row()` 메서드
- [ ] `ConflictEventsRepository` 구현 (#TBD)
  - [ ] `insert()`, `get_by_id()`, `get_recent_keys()`
  - [ ] `update_status()`, `update_github_info()`

---

## Phase 2: 감지기 구현

- [ ] `HandDuplicateDetector` 구현 (#TBD)
  - [ ] 시간 기반 중복 스캔 쿼리
  - [ ] 단위 테스트
- [ ] `RenderDuplicateDetector` 구현 (#TBD)
  - [ ] trigger_id 기반 중복 스캔
  - [ ] 심각도 자동 판정 (완료 여부)
  - [ ] 단위 테스트
- [ ] `ConcurrencyConflictDetector` 구현 (#TBD)
  - [ ] 동시 processing 상태 감지
  - [ ] 단위 테스트

---

## Phase 3: GitHub 이슈 연동

- [ ] `GitHubIssueCreator` 구현 (#TBD)
  - [ ] `gh issue create` 래퍼
  - [ ] Issue 제목/본문 템플릿
  - [ ] 라벨 자동 지정
- [ ] 환경 변수 설정 (#TBD)
  - [ ] `GITHUB_TOKEN`
  - [ ] `CONFLICT_GITHUB_REPO`

---

## Phase 4: 스케줄러 & API

- [ ] `ConflictMonitorScheduler` 구현 (#TBD)
  - [ ] APScheduler 5분 주기
  - [ ] 병렬 스캔 실행
  - [ ] 중복 이벤트 필터링
- [ ] REST API 엔드포인트 (#TBD)
  - [ ] `GET /api/conflicts`
  - [ ] `GET /api/conflicts/{id}`
  - [ ] `POST /api/conflicts/{id}/acknowledge`
  - [ ] `POST /api/conflicts/{id}/resolve`
  - [ ] `POST /api/conflicts/scan`
  - [ ] `GET /api/conflicts/stats`
- [ ] 통합 테스트 (#TBD)

---

## Phase 5: 대시보드 연동 (선택)

- [ ] WebSocket 이벤트 브로드캐스트 (#TBD)
- [ ] 대시보드 UI 충돌 패널 (#TBD)

---

## 품질 체크리스트

- [ ] 단위 테스트 커버리지 > 80%
- [ ] MyPy strict mode 통과
- [ ] Ruff 린트 통과
- [ ] False Positive 비율 < 5% (수동 검증)

---

## 관련 문서

- [PRD-0002 본문](../tasks/prds/PRD-0002-conflict-monitoring.md)
- [PRD-0001 (상위 PRD)](../tasks/prds/PRD-0001-automation-hub-v2.md)
